<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 6 Working with data | A stats book</title>
  <meta name="description" content="How to get started with Rstats">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 6 Working with data | A stats book" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="How to get started with Rstats" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Working with data | A stats book" />
  
  <meta name="twitter:description" content="How to get started with Rstats" />
  

<meta name="author" content="Marc Kissel and Kaitie Schuping">


<meta name="date" content="2019-10-15">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="working-with-spreadsheets.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.8.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.39.2/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.39.2/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.2/leaflet.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A stats book</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#ok-how-do-i-get-r"><i class="fa fa-check"></i><b>1.1</b> Ok, how do i get R?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#install-r-and-r-studio"><i class="fa fa-check"></i><b>1.1.1</b> install R and R Studio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#r-studio"><i class="fa fa-check"></i><b>1.2</b> R Studio</a><ul>
<li class="chapter" data-level="1.2.1" data-path="introduction.html"><a href="introduction.html#lets-look-around"><i class="fa fa-check"></i><b>1.2.1</b> lets look around…</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#r-projects"><i class="fa fa-check"></i><b>1.3</b> R projects</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#short-overview-of-how-r-works"><i class="fa fa-check"></i><b>1.4</b> Short overview of how R works</a><ul>
<li class="chapter" data-level="1.4.1" data-path="introduction.html"><a href="introduction.html#incomplete-code"><i class="fa fa-check"></i><b>1.4.1</b> Incomplete Code</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#lets-practice"><i class="fa fa-check"></i><b>1.5</b> lets practice</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="now-what.html"><a href="now-what.html"><i class="fa fa-check"></i><b>2</b> Now What</a><ul>
<li class="chapter" data-level="2.1" data-path="now-what.html"><a href="now-what.html#R-basics"><i class="fa fa-check"></i><b>2.1</b> R-basics</a></li>
<li class="chapter" data-level="2.2" data-path="now-what.html"><a href="now-what.html#some-examples-maybe-put-this-in-chpt-3"><i class="fa fa-check"></i><b>2.2</b> some examples MAYBE PUT THIS IN CHPT 3?</a><ul>
<li class="chapter" data-level="2.2.1" data-path="now-what.html"><a href="now-what.html#ok-but-what-can-we-do-with-this"><i class="fa fa-check"></i><b>2.2.1</b> Ok, but what can we do with this?</a></li>
<li class="chapter" data-level="2.2.2" data-path="now-what.html"><a href="now-what.html#a-motion-plot"><i class="fa fa-check"></i><b>2.2.2</b> A motion plot</a></li>
<li class="chapter" data-level="2.2.3" data-path="now-what.html"><a href="now-what.html#you-can-do-fun-things-in-presentaions"><i class="fa fa-check"></i><b>2.2.3</b> You can do fun things in presentaions:</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="now-what.html"><a href="now-what.html#things-to-keep-in-mind"><i class="fa fa-check"></i><b>2.3</b> Things to keep in mind:</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="technical-details.html"><a href="technical-details.html"><i class="fa fa-check"></i><b>3</b> Technical Details</a><ul>
<li class="chapter" data-level="3.1" data-path="technical-details.html"><a href="technical-details.html#notes-while-working-on-book"><i class="fa fa-check"></i><b>3.1</b> notes while working on book</a></li>
<li class="chapter" data-level="3.2" data-path="technical-details.html"><a href="technical-details.html#basic-r-stuff"><i class="fa fa-check"></i><b>3.2</b> basic R stuff</a><ul>
<li class="chapter" data-level="3.2.1" data-path="technical-details.html"><a href="technical-details.html#working-with-factors"><i class="fa fa-check"></i><b>3.2.1</b> working with factors</a></li>
<li class="chapter" data-level="3.2.2" data-path="technical-details.html"><a href="technical-details.html#factors-in-the-tidyverse"><i class="fa fa-check"></i><b>3.2.2</b> factors in the tidyverse</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html"><i class="fa fa-check"></i><b>4</b> How Computers (and R) Think</a><ul>
<li class="chapter" data-level="4.1" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html#filefolder-management"><i class="fa fa-check"></i><b>4.1</b> file/folder management</a><ul>
<li class="chapter" data-level="4.1.1" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html#file-names"><i class="fa fa-check"></i><b>4.1.1</b> file names</a></li>
<li class="chapter" data-level="4.1.2" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html#dates-04"><i class="fa fa-check"></i><b>4.1.2</b> dates</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html#file-types"><i class="fa fa-check"></i><b>4.2</b> file types</a></li>
<li class="chapter" data-level="4.3" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html#types-of-files-you-might-see-in-the-wild-and-what-they-are"><i class="fa fa-check"></i><b>4.3</b> types of files you might see in the wild and what they are</a></li>
<li class="chapter" data-level="4.4" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html#accessing-internet-resources"><i class="fa fa-check"></i><b>4.4</b> Accessing internet resources</a><ul>
<li class="chapter" data-level="4.4.1" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html#what-is-an-api"><i class="fa fa-check"></i><b>4.4.1</b> what is an api</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="how-computers-and-r-think.html"><a href="how-computers-and-r-think.html#refs-for-this-section"><i class="fa fa-check"></i><b>4.5</b> refs for this section</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="working-with-spreadsheets.html"><a href="working-with-spreadsheets.html"><i class="fa fa-check"></i><b>5</b> Working with Spreadsheets</a><ul>
<li class="chapter" data-level="5.1" data-path="working-with-spreadsheets.html"><a href="working-with-spreadsheets.html#how-to-best-use-spreadsheets"><i class="fa fa-check"></i><b>5.1</b> How to best use spreadsheets:</a></li>
<li class="chapter" data-level="5.2" data-path="working-with-spreadsheets.html"><a href="working-with-spreadsheets.html#types-of-data-used-in-spreadsheets"><i class="fa fa-check"></i><b>5.2</b> Types of data used in spreadsheets:</a></li>
<li class="chapter" data-level="5.3" data-path="working-with-spreadsheets.html"><a href="working-with-spreadsheets.html#problems"><i class="fa fa-check"></i><b>5.3</b> problems</a></li>
<li class="chapter" data-level="5.4" data-path="working-with-spreadsheets.html"><a href="working-with-spreadsheets.html#spreadsheet-programs"><i class="fa fa-check"></i><b>5.4</b> Spreadsheet programs</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="working-with-data.html"><a href="working-with-data.html"><i class="fa fa-check"></i><b>6</b> Working with data</a><ul>
<li class="chapter" data-level="6.1" data-path="working-with-data.html"><a href="working-with-data.html#tidy-data"><i class="fa fa-check"></i><b>6.1</b> Tidy data</a></li>
<li class="chapter" data-level="6.2" data-path="working-with-data.html"><a href="working-with-data.html#examples"><i class="fa fa-check"></i><b>6.2</b> examples</a></li>
<li class="chapter" data-level="6.3" data-path="working-with-data.html"><a href="working-with-data.html#getting-data-into-r"><i class="fa fa-check"></i><b>6.3</b> getting data into R</a><ul>
<li class="chapter" data-level="6.3.1" data-path="working-with-data.html"><a href="working-with-data.html#reading-in-a-csv-file"><i class="fa fa-check"></i><b>6.3.1</b> reading in a CSV file</a></li>
<li class="chapter" data-level="6.3.2" data-path="working-with-data.html"><a href="working-with-data.html#reading-in-a-excel-file"><i class="fa fa-check"></i><b>6.3.2</b> reading in a Excel file</a></li>
<li class="chapter" data-level="6.3.3" data-path="working-with-data.html"><a href="working-with-data.html#datapasta"><i class="fa fa-check"></i><b>6.3.3</b> Datapasta</a></li>
<li class="chapter" data-level="6.3.4" data-path="working-with-data.html"><a href="working-with-data.html#cleaning-the-data-once-it-is-in-r"><i class="fa fa-check"></i><b>6.3.4</b> cleaning the data once it is in R</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="working-with-data.html"><a href="working-with-data.html#you-got-the-data-into-r-now-what"><i class="fa fa-check"></i><b>6.4</b> You got the data into R, now what?</a></li>
<li class="chapter" data-level="6.5" data-path="working-with-data.html"><a href="working-with-data.html#lets-look-at-the-primate-dataset"><i class="fa fa-check"></i><b>6.5</b> lets look at the primate dataset</a><ul>
<li class="chapter" data-level="6.5.1" data-path="working-with-data.html"><a href="working-with-data.html#viewing-the-data"><i class="fa fa-check"></i><b>6.5.1</b> viewing the data</a></li>
<li class="chapter" data-level="6.5.2" data-path="working-with-data.html"><a href="working-with-data.html#exploring-the-data"><i class="fa fa-check"></i><b>6.5.2</b> exploring the data</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="working-with-data.html"><a href="working-with-data.html#another-example"><i class="fa fa-check"></i><b>6.6</b> another example</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A stats book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working-with-data" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Working with data</h1>
<p>NEEDS A LOT OF EDITS</p>
<p>How do we manipulate the data to tell a story</p>
<ol style="list-style-type: decimal">
<li>How to get data from your collaborators into a format for R…</li>
<li>how to organize data
3.how to explore data</li>
</ol>
<p>As we talked about in the previous chapter, most data live in spreadsheets.</p>
<div id="tidy-data" class="section level2">
<h2><span class="header-section-number">6.1</span> Tidy data</h2>
<p>[maybe talk about this in the spreadsheet chpt?]</p>
<p>Data transformation is the key to R. we are going to take data in from a worksheet/csv/whatever and transform it.</p>
<p>There are a number of ways to do this. One method that gives us many options is using a package called <em>dplyr.</em> This is part of a larger group of packages known as the <em>Tidyverse.</em></p>
</div>
<div id="examples" class="section level2">
<h2><span class="header-section-number">6.2</span> examples</h2>
<ul>
<li>data i used from NSF</li>
<li>use data from the primate database</li>
<li>a few from Tidytuesday so they are introduced to that</li>
<li>another anthro dataset</li>
</ul>
</div>
<div id="getting-data-into-r" class="section level2">
<h2><span class="header-section-number">6.3</span> getting data into R</h2>
<p>While it has gotten easier over the years to do this, one of the major struggles first-time R users (and seasoned professionals) have is getting data from a file into R. In this section we give a few different methods of doing this.</p>
<p>examples:
read.csv and read_csv
using the ‘import dataset’ button
read_xl
datapasta
etc..</p>
<div id="reading-in-a-csv-file" class="section level3">
<h3><span class="header-section-number">6.3.1</span> reading in a CSV file</h3>
<p>if you are lucky the data sent to you is in a CSV file (see chpt 5 @ref(Working with Spreadsheets)) for tips on what to do if this is not the case).</p>
<p>There are XXX ways to do this</p>
<div id="read.csv-vs-read_csv-vs-fread-from-data.table" class="section level4">
<h4><span class="header-section-number">6.3.1.1</span> read.csv vs read_csv vs fread (from data.table)</h4>
<p>These are very similar functions. The read.csv is part of base R whil read_csv is from the Tidyverse. Most of the differences between the two functions aren’t really useful for us (see XXXX for details) but there are two things to mention. One is that unlike read.csv, read_csv doesn’t automatically imports strings as factors. This might be useful since the assumption that strings should be factors has a bit of history attached to it <img src="https://simplystatistics.org/2015/07/24/stringsasfactors-an-unauthorized-biography/" />. Moreover, read_csv seems to do a better job of ‘guessing’ the type of data in each column. It parses the cols and puts them in the data type that it guesses they should be in</p>
<p>read_csv also tells you what it parsed each col as.</p>
<p>fread has the nice output that it tells you had big the file is</p>
<p>read_csv will import the data as a tibble vs as a dataframe so keep that in mind. It is also faster than read.csv, while fread seems to be the fastest overall</p>
<p>As with anything, people disagree about this. honestly you caa get bogged down in this or just pick one and learn that one. and if you need a different method know it exists.</p>
<p>also, keep in mind that there are other types of data you can read in with these.</p>
<p>examples:</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)</code></pre>
<pre><code>## Warning: package &#39;tidyverse&#39; was built under R version 3.5.3</code></pre>
<pre><code>## -- Attaching packages ----------------------------------------------------- tidyverse 1.2.1 --</code></pre>
<pre><code>## v ggplot2 3.1.0     v purrr   0.3.2
## v tibble  2.1.3     v dplyr   0.8.1
## v tidyr   0.8.3     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.3.0</code></pre>
<pre><code>## Warning: package &#39;ggplot2&#39; was built under R version 3.5.2</code></pre>
<pre><code>## Warning: package &#39;tibble&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;tidyr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;readr&#39; was built under R version 3.5.2</code></pre>
<pre><code>## Warning: package &#39;purrr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;dplyr&#39; was built under R version 3.5.3</code></pre>
<pre><code>## Warning: package &#39;stringr&#39; was built under R version 3.5.2</code></pre>
<pre><code>## -- Conflicts -------------------------------------------------------- tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(data.table)</code></pre>
<pre><code>## 
## Attaching package: &#39;data.table&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     between, first, last</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     transpose</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">body_mass_base &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://zenodo.org/record/2600338/files/BodyMass.csv&quot;</span>)

body_mass_tidy &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://zenodo.org/record/2600338/files/BodyMass.csv&quot;</span>)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   Family = col_character(),
##   Genus = col_character(),
##   CommonName = col_character(),
##   Species = col_character(),
##   `Species (ITIS)` = col_character(),
##   BodyMass_kg = col_double(),
##   BodyMassMale_kg = col_double(),
##   BodyMassFemale_kg = col_double(),
##   Refs1 = col_character()
## )</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">body_mass_datatable &lt;-<span class="st"> </span><span class="kw">fread</span>(<span class="st">&quot;https://zenodo.org/record/2600338/files/BodyMass.csv&quot;</span>)</code></pre>
<blockquote>
<p>look at each of the objects imported above. compare them with str function. What differences do you see?</p>
</blockquote>
<p>If you are using Rstudio there is another way to do this. if you look at the enviotnment pane you will see an ‘import dataset’ button (next to the little broom). clicking that gives you a point-and-click interface that will generate the function calls to read in various datasets</p>
<blockquote>
<p>using the button play around with the various options in readr and see what you can find out. HOw can you change the way readr parses a speicfic col?</p>
</blockquote>
</div>
</div>
<div id="reading-in-a-excel-file" class="section level3">
<h3><span class="header-section-number">6.3.2</span> reading in a Excel file</h3>
<p>How to import/ a dataset from Excel into R:
I. Open Excel data
a. File/ Save As/ Name/ *Before clicking save, make sure to change the file format to Comma Delimited Text and better set the directory to My Documents folder, for Windows
b. When Saved, this file will have a name Data.csv.
II Now Open R and run
a. MyRData &lt;- read.csv(“Data.csv”, header = TRUE)
i. The argument header= TRUE tells R that the first row of the data labels of every column
1. If set to FALSE then the first row of the data are not labels but are considered as data points
b. If data is saved in Text (.txt) format, use the read.table function
i. Run
MyRData2 &lt;- read.table(“Data1.text”, header = TRUE)</p>
<p>read_xl</p>
</div>
<div id="datapasta" class="section level3">
<h3><span class="header-section-number">6.3.3</span> Datapasta</h3>
</div>
<div id="cleaning-the-data-once-it-is-in-r" class="section level3">
<h3><span class="header-section-number">6.3.4</span> cleaning the data once it is in R</h3>
<p>sometimes the col heads are messy. the wonderful janitor package comes in useful here</p>
<pre class="sourceCode r"><code class="sourceCode r">home_range &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://zenodo.org/record/2600338/files/HomeRange.csv&quot;</span>)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   Family = col_character(),
##   Genus = col_character(),
##   CommonName = col_character(),
##   Species = col_character(),
##   `Species (ITIS)` = col_character(),
##   HomeRange_ha = col_double(),
##   Low_range = col_character(),
##   High_range = col_character(),
##   N_groups = col_character(),
##   Mean_individuals = col_character(),
##   Method = col_character(),
##   Alternative_HomeRange_ha = col_character(),
##   Alternative_HomeRange_method = col_character(),
##   Study_duration_months = col_character(),
##   Refs = col_double()
## )</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">home_range_clean &lt;-<span class="st"> </span>janitor<span class="op">::</span><span class="kw">clean_names</span>(home_range)</code></pre>
<blockquote>
<p>How does home_range differ from home_range_clean? look at the online help for the Janitor package and figure out what other functions it has? how would you find duplicate rows of data?</p>
</blockquote>
</div>
</div>
<div id="you-got-the-data-into-r-now-what" class="section level2">
<h2><span class="header-section-number">6.4</span> You got the data into R, now what?</h2>
<p>Once you get data into R the question becomes what to do with it.
EDA
when doing EDA we need to be careful. as you ‘explore’ data you are also affecting your view of it. for example as we look at the dataset we may play around and start to see patterns. these patterns might be there because we choose to look for patterns and not becuse they are real..good practice is to take a ‘training set’ of your data and explore that.
Or use a dataset that you aren’t studying to learn</p>
</div>
<div id="lets-look-at-the-primate-dataset" class="section level2">
<h2><span class="header-section-number">6.5</span> lets look at the primate dataset</h2>
<p>This comes from XXXXXX</p>
<div id="viewing-the-data" class="section level3">
<h3><span class="header-section-number">6.5.1</span> viewing the data</h3>
<pre class="sourceCode r"><code class="sourceCode r">home_range &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;https://zenodo.org/record/2600338/files/HomeRange.csv&quot;</span>)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   Family = col_character(),
##   Genus = col_character(),
##   CommonName = col_character(),
##   Species = col_character(),
##   `Species (ITIS)` = col_character(),
##   HomeRange_ha = col_double(),
##   Low_range = col_character(),
##   High_range = col_character(),
##   N_groups = col_character(),
##   Mean_individuals = col_character(),
##   Method = col_character(),
##   Alternative_HomeRange_ha = col_character(),
##   Alternative_HomeRange_method = col_character(),
##   Study_duration_months = col_character(),
##   Refs = col_double()
## )</code></pre>
<p>we can explore the data that is in R with different functions.</p>
<p>just enter the name of the object spits out some info</p>
<pre class="sourceCode r"><code class="sourceCode r">home_range</code></pre>
<pre><code>## # A tibble: 748 x 15
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Cerco~ Alle~ Allen_s_S~ Alleno~ Allenopithecus_~        NA    &lt;NA&gt;     
##  2 Cheir~ Allo~ Hairy_ear~ Alloce~ Allocebus_trich~        25.8  16       
##  3 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~       117.   NI       
##  4 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~        61.3  51.81    
##  5 Cerco~ Allo~ Preuss_s_~ Alloch~ Allochrocebus_p~        NA    &lt;NA&gt;     
##  6 Cerco~ Allo~ Sun_taile~ Alloch~ Allochrocebus_s~        NA    &lt;NA&gt;     
##  7 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~         7.52 NI       
##  8 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~        14.5  4        
##  9 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~         5.5  4        
## 10 Ateli~ Alou~ Red_hande~ Alouat~ Alouatta_belzeb~         7.12 4.75     
## # ... with 738 more rows, and 8 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">print</span>(home_range)</code></pre>
<pre><code>## # A tibble: 748 x 15
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Cerco~ Alle~ Allen_s_S~ Alleno~ Allenopithecus_~        NA    &lt;NA&gt;     
##  2 Cheir~ Allo~ Hairy_ear~ Alloce~ Allocebus_trich~        25.8  16       
##  3 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~       117.   NI       
##  4 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~        61.3  51.81    
##  5 Cerco~ Allo~ Preuss_s_~ Alloch~ Allochrocebus_p~        NA    &lt;NA&gt;     
##  6 Cerco~ Allo~ Sun_taile~ Alloch~ Allochrocebus_s~        NA    &lt;NA&gt;     
##  7 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~         7.52 NI       
##  8 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~        14.5  4        
##  9 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~         5.5  4        
## 10 Ateli~ Alou~ Red_hande~ Alouat~ Alouatta_belzeb~         7.12 4.75     
## # ... with 738 more rows, and 8 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;</code></pre>
<p>notes a couple of things about the output in the console.</p>
<ol style="list-style-type: decimal">
<li>it might not all fit on the screen</li>
<li>if you scroll to the top you see that it is a ‘tibble’ that is 748 x 15. This means there are 748 rows and 15 columns</li>
</ol>
<p>FIND ANOTHER DATASET
&gt; how many observatiosn are ther
&gt; How many variables?</p>
<p>If you want to see just the first few rows use head</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(home_range)</code></pre>
<pre><code>## # A tibble: 6 x 15
##   Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
## 1 Cerco~ Alle~ Allen_s_S~ Alleno~ Allenopithecus_~         NA   &lt;NA&gt;     
## 2 Cheir~ Allo~ Hairy_ear~ Alloce~ Allocebus_trich~         25.8 16       
## 3 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~        117.  NI       
## 4 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~         61.3 51.81    
## 5 Cerco~ Allo~ Preuss_s_~ Alloch~ Allochrocebus_p~         NA   &lt;NA&gt;     
## 6 Cerco~ Allo~ Sun_taile~ Alloch~ Allochrocebus_s~         NA   &lt;NA&gt;     
## # ... with 8 more variables: High_range &lt;chr&gt;, N_groups &lt;chr&gt;,
## #   Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;, Alternative_HomeRange_ha &lt;chr&gt;,
## #   Alternative_HomeRange_method &lt;chr&gt;, Study_duration_months &lt;chr&gt;,
## #   Refs &lt;dbl&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(home_range)</code></pre>
<pre><code>## # A tibble: 6 x 15
##   Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
## 1 Cerco~ Trac~ Selangor_~ Trachy~ Trachypithecus_~         31.5 NI       
## 2 Cerco~ Trac~ Shortridg~ Trachy~ Trachypithecus_~         NA   &lt;NA&gt;     
## 3 Lemur~ Vare~ Red_Ruffe~ Vareci~ Varecia_rubra            24.6 23.3     
## 4 Lemur~ Vare~ Red_Ruffe~ Vareci~ Varecia_rubra            10.5 5.42     
## 5 Lemur~ Vare~ Black_and~ Vareci~ Varecia_variega~        117.  100      
## 6 Lemur~ Vare~ Black_and~ Vareci~ Varecia_variega~        139   NI       
## # ... with 8 more variables: High_range &lt;chr&gt;, N_groups &lt;chr&gt;,
## #   Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;, Alternative_HomeRange_ha &lt;chr&gt;,
## #   Alternative_HomeRange_method &lt;chr&gt;, Study_duration_months &lt;chr&gt;,
## #   Refs &lt;dbl&gt;</code></pre>
<p>You can also use the built-in dataviwer with the View function. this makes a spreadsheet that you can quickly explore</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(home_range)</code></pre>
<p>finally, if the data is a tibble you can use glimpse</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(home_range)</code></pre>
<pre><code>## Observations: 748
## Variables: 15
## $ Family                       &lt;chr&gt; &quot;Cercopithecidae&quot;, &quot;Cheirogaleida...
## $ Genus                        &lt;chr&gt; &quot;Allenopithecus&quot;, &quot;Allocebus&quot;, &quot;A...
## $ CommonName                   &lt;chr&gt; &quot;Allen_s_Swamp_Monkey&quot;, &quot;Hairy_ea...
## $ Species                      &lt;chr&gt; &quot;Allenopithecus_nigroviridis&quot;, &quot;A...
## $ `Species (ITIS)`             &lt;chr&gt; &quot;Allenopithecus_nigroviridis&quot;, &quot;A...
## $ HomeRange_ha                 &lt;dbl&gt; NA, 25.750, 116.600, 61.325, NA, ...
## $ Low_range                    &lt;chr&gt; NA, &quot;16&quot;, &quot;NI&quot;, &quot;51.81&quot;, NA, NA, ...
## $ High_range                   &lt;chr&gt; NA, &quot;35.5&quot;, &quot;NI&quot;, &quot;70.84&quot;, NA, NA...
## $ N_groups                     &lt;chr&gt; NA, &quot;2&quot;, &quot;NI&quot;, &quot;2&quot;, NA, NA, &quot;NI&quot;,...
## $ Mean_individuals             &lt;chr&gt; NA, &quot;3&quot;, &quot;NI&quot;, &quot;27&quot;, NA, NA, &quot;NI&quot;...
## $ Method                       &lt;chr&gt; NA, &quot;Minimum convex polygon&quot;, &quot;NI...
## $ Alternative_HomeRange_ha     &lt;chr&gt; NA, &quot;10.4&quot;, &quot;NI&quot;, &quot;75.5&quot;, NA, NA,...
## $ Alternative_HomeRange_method &lt;chr&gt; NA, &quot;Kernel density estimators&quot;, ...
## $ Study_duration_months        &lt;chr&gt; NA, &quot;8&quot;, &quot;NI&quot;, &quot;11&quot;, NA, NA, &quot;NI&quot;...
## $ Refs                         &lt;dbl&gt; NA, 373, 1174, 245, NA, NA, 381, ...</code></pre>
<blockquote>
<p>what differences exist betwen print and glimpse</p>
</blockquote>
</div>
<div id="exploring-the-data" class="section level3">
<h3><span class="header-section-number">6.5.2</span> exploring the data</h3>
<p>Much of this usse the dplyr package which is part of the tidyverse. We also show how to use the data.tables pacakge as well.</p>
<p>As its authors point out, a good way to think of dplyr is in terms of verbs. the verbs do things to the object</p>
<div id="count" class="section level4">
<h4><span class="header-section-number">6.5.2.1</span> count</h4>
<p>this function provides a count by varibale</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">count</span>(home_range, Family)</code></pre>
<pre><code>## # A tibble: 17 x 2
##    Family              n
##    &lt;chr&gt;           &lt;int&gt;
##  1 &lt;NA&gt;                2
##  2 Aotidae            13
##  3 Atelidae           54
##  4 Callitrichidae     86
##  5 Cebidae            41
##  6 Cercopithecidae   228
##  7 Cheirogaleidae     45
##  8 Daubentoniidae      1
##  9 Galagidae          32
## 10 Hominidae          13
## 11 Hylobatidae        30
## 12 Indriidae          26
## 13 Lemuridae          38
## 14 Lepilemuridae      29
## 15 Lorisidae          19
## 16 Pitheciidae        76
## 17 Tarsiidae          15</code></pre>
<blockquote>
<p>look at the help for count and figure out how to make it order the output from large to small</p>
</blockquote>
<p>add_count adds a new col at the end of the dataframe with these data</p>
<pre class="sourceCode r"><code class="sourceCode r"> <span class="kw">add_count</span>(home_range, Family, <span class="dt">name =</span> <span class="st">&quot;family_count&quot;</span>) </code></pre>
<pre><code>## # A tibble: 748 x 16
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Cerco~ Alle~ Allen_s_S~ Alleno~ Allenopithecus_~        NA    &lt;NA&gt;     
##  2 Cheir~ Allo~ Hairy_ear~ Alloce~ Allocebus_trich~        25.8  16       
##  3 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~       117.   NI       
##  4 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~        61.3  51.81    
##  5 Cerco~ Allo~ Preuss_s_~ Alloch~ Allochrocebus_p~        NA    &lt;NA&gt;     
##  6 Cerco~ Allo~ Sun_taile~ Alloch~ Allochrocebus_s~        NA    &lt;NA&gt;     
##  7 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~         7.52 NI       
##  8 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~        14.5  4        
##  9 Ateli~ Alou~ Ursine_Re~ Alouat~ Alouatta_arctoi~         5.5  4        
## 10 Ateli~ Alou~ Red_hande~ Alouat~ Alouatta_belzeb~         7.12 4.75     
## # ... with 738 more rows, and 9 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;, family_count &lt;int&gt;</code></pre>
<p>Count is a great way to start exploring your dataset.</p>
<p>One nice way to make complex code easier to read is to chain arguments togehter w/ the “%&gt;%” symobl. This comes from the AAAAAA pacakage and also is loaded when you load the tidyverse. the %&gt;% can be read as “then”</p>
<p>so the same code to get the counts of Famlies can be done like this</p>
<pre class="sourceCode r"><code class="sourceCode r">home_range <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(Family, <span class="dt">sort =</span> T)</code></pre>
<pre><code>## # A tibble: 17 x 2
##    Family              n
##    &lt;chr&gt;           &lt;int&gt;
##  1 Cercopithecidae   228
##  2 Callitrichidae     86
##  3 Pitheciidae        76
##  4 Atelidae           54
##  5 Cheirogaleidae     45
##  6 Cebidae            41
##  7 Lemuridae          38
##  8 Galagidae          32
##  9 Hylobatidae        30
## 10 Lepilemuridae      29
## 11 Indriidae          26
## 12 Lorisidae          19
## 13 Tarsiidae          15
## 14 Aotidae            13
## 15 Hominidae          13
## 16 &lt;NA&gt;                2
## 17 Daubentoniidae      1</code></pre>
<p>This is sometimes easier when you have a long code and want to make it readable</p>
</div>
<div id="filter" class="section level4">
<h4><span class="header-section-number">6.5.2.2</span> Filter</h4>
<p>this function searches for rows that match the arguement. For example, lets say you want all the speices in the genus Allenopithecus</p>
<p><strong>note the == rather than =</strong></p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(home_range, Genus <span class="op">==</span><span class="st"> &quot;Macaca&quot;</span>)</code></pre>
<pre><code>## # A tibble: 38 x 15
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Cerco~ Maca~ Stump_tai~ Macaca~ Macaca_arctoides        462.  NI       
##  2 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~        434.  352      
##  3 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~        208.  65.6     
##  4 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~         59   53       
##  5 Cerco~ Maca~ Taiwanese~ Macaca~ Macaca_cyclopis         120   NI       
##  6 Cerco~ Maca~ Taiwanese~ Macaca~ Macaca_cyclopis         200   NI       
##  7 Cerco~ Maca~ Taiwanese~ Macaca~ Macaca_cyclopis          97   NI       
##  8 Cerco~ Maca~ Long_tail~ Macaca~ Macaca_fascicul~        157   14       
##  9 Cerco~ Maca~ Japanese_~ Macaca~ Macaca_fuscata           24.0 3.9      
## 10 Cerco~ Maca~ Japanese_~ Macaca~ Macaca_fuscata          366   NI       
## # ... with 28 more rows, and 8 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#or</span>

home_range <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Genus <span class="op">==</span><span class="st"> &quot;Macaca&quot;</span>)</code></pre>
<pre><code>## # A tibble: 38 x 15
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Cerco~ Maca~ Stump_tai~ Macaca~ Macaca_arctoides        462.  NI       
##  2 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~        434.  352      
##  3 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~        208.  65.6     
##  4 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~         59   53       
##  5 Cerco~ Maca~ Taiwanese~ Macaca~ Macaca_cyclopis         120   NI       
##  6 Cerco~ Maca~ Taiwanese~ Macaca~ Macaca_cyclopis         200   NI       
##  7 Cerco~ Maca~ Taiwanese~ Macaca~ Macaca_cyclopis          97   NI       
##  8 Cerco~ Maca~ Long_tail~ Macaca~ Macaca_fascicul~        157   14       
##  9 Cerco~ Maca~ Japanese_~ Macaca~ Macaca_fuscata           24.0 3.9      
## 10 Cerco~ Maca~ Japanese_~ Macaca~ Macaca_fuscata          366   NI       
## # ... with 28 more rows, and 8 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;</code></pre>
<p>You can do more complex filters too:</p>
<p>lets say you want two genra</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(home_range, Genus <span class="op">==</span><span class="st"> &quot;Macaca&quot;</span> <span class="op">|</span><span class="st"> </span>Genus <span class="op">==</span><span class="st"> &quot;Allochrocebus&quot;</span>)</code></pre>
<pre><code>## # A tibble: 42 x 15
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~        117.  NI       
##  2 Cerco~ Allo~ L_Hoest_s~ Alloch~ Allochrocebus_l~         61.3 51.81    
##  3 Cerco~ Allo~ Preuss_s_~ Alloch~ Allochrocebus_p~         NA   &lt;NA&gt;     
##  4 Cerco~ Allo~ Sun_taile~ Alloch~ Allochrocebus_s~         NA   &lt;NA&gt;     
##  5 Cerco~ Maca~ Stump_tai~ Macaca~ Macaca_arctoides        462.  NI       
##  6 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~        434.  352      
##  7 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~        208.  65.6     
##  8 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~         59   53       
##  9 Cerco~ Maca~ Taiwanese~ Macaca~ Macaca_cyclopis         120   NI       
## 10 Cerco~ Maca~ Taiwanese~ Macaca~ Macaca_cyclopis         200   NI       
## # ... with 32 more rows, and 8 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;</code></pre>
<p>or you want to match two varibales</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">filter</span>(home_range, Genus <span class="op">==</span><span class="st"> &quot;Macaca&quot;</span> <span class="op">&amp;</span><span class="st"> </span>N_groups <span class="op">==</span><span class="st"> </span><span class="dv">2</span>)</code></pre>
<pre><code>## # A tibble: 4 x 15
##   Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##   &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
## 1 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~         208. 65.6     
## 2 Cerco~ Maca~ Assamese_~ Macaca~ Macaca_assamens~          59  53       
## 3 Cerco~ Maca~ Rhesus_Ma~ Macaca~ Macaca_mulatta            83  1        
## 4 Cerco~ Maca~ Tonkean_M~ Macaca~ Macaca_tonkeana          105. 66.75    
## # ... with 8 more variables: High_range &lt;chr&gt;, N_groups &lt;chr&gt;,
## #   Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;, Alternative_HomeRange_ha &lt;chr&gt;,
## #   Alternative_HomeRange_method &lt;chr&gt;, Study_duration_months &lt;chr&gt;,
## #   Refs &lt;dbl&gt;</code></pre>
<blockquote>
<p>how would you find HomeRange_ha greater than 75 and then save that to a new dataset. look at the dplyr help to figure this out</p>
</blockquote>
<pre class="sourceCode r"><code class="sourceCode r">over75 &lt;-<span class="st"> </span><span class="kw">filter</span>(home_range, HomeRange_ha <span class="op">&gt;</span><span class="st"> </span><span class="dv">75</span>)</code></pre>
</div>
<div id="select" class="section level4">
<h4><span class="header-section-number">6.5.2.3</span> Select</h4>
<p>this verb searches the dataframe and only returns cols that you ask for. For example. lets say i just want the speceis and home range</p>
<pre class="sourceCode r"><code class="sourceCode r">home_range <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Species, HomeRange_ha)</code></pre>
<pre><code>## # A tibble: 748 x 2
##    Species                     HomeRange_ha
##    &lt;chr&gt;                              &lt;dbl&gt;
##  1 Allenopithecus_nigroviridis        NA   
##  2 Allocebus_trichotis                25.8 
##  3 Allochrocebus_lhoesti             117.  
##  4 Allochrocebus_lhoesti              61.3 
##  5 Allochrocebus_preussi              NA   
##  6 Allochrocebus_solatus              NA   
##  7 Alouatta_arctoidea                  7.52
##  8 Alouatta_arctoidea                 14.5 
##  9 Alouatta_arctoidea                  5.5 
## 10 Alouatta_belzebul                   7.12
## # ... with 738 more rows</code></pre>
<p>This is useful when you want to look at only some things</p>
<blockquote>
<p>select has a lot of arguments. HOw would you select all the cols that habe the startes with the prefix “Alt”</p>
</blockquote>
<p>YOu can also chain verbs together</p>
<pre class="sourceCode r"><code class="sourceCode r">home_range <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Genus <span class="op">==</span><span class="st"> &quot;Macaca&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Species)</code></pre>
<pre><code>## # A tibble: 38 x 1
##    Species            
##    &lt;chr&gt;              
##  1 Macaca_arctoides   
##  2 Macaca_assamensis  
##  3 Macaca_assamensis  
##  4 Macaca_assamensis  
##  5 Macaca_cyclopis    
##  6 Macaca_cyclopis    
##  7 Macaca_cyclopis    
##  8 Macaca_fascicularis
##  9 Macaca_fuscata     
## 10 Macaca_fuscata     
## # ... with 28 more rows</code></pre>
</div>
<div id="arrange" class="section level4">
<h4><span class="header-section-number">6.5.2.4</span> arrange</h4>
<p>this sorts the data</p>
<pre class="sourceCode r"><code class="sourceCode r">home_range <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(HomeRange_ha)</code></pre>
<pre><code>## # A tibble: 748 x 15
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Lepil~ Lepi~ Weasel_Sp~ Lepile~ Lepilemur_muste~        0.3   NI       
##  2 Lepil~ Lepi~ Petter_s_~ Lepile~ Lepilemur_pette~        0.3   NI       
##  3 Cheir~ Micr~ Gray_brow~ Microc~ Microcebus_gris~        0.3   NI       
##  4 Calli~ Cebu~ Pygmy_Mar~ Cebuel~ Cebuella_pygmaea        0.34  NI       
##  5 Cheir~ Micr~ Goodman_s~ Microc~ Microcebus_lehi~        0.35  0.1      
##  6 Lepil~ Lepi~ White_foo~ Lepile~ Lepilemur_leuco~        0.5   NI       
##  7 Lepil~ Lepi~ Small_too~ Lepile~ Lepilemur_micro~        0.5   NI       
##  8 Cheir~ Micr~ Golden_br~ Microc~ Microcebus_rave~        0.570 0.54     
##  9 Cheir~ Micr~ Gray_brow~ Microc~ Microcebus_gris~        0.66  0.43     
## 10 Lepil~ Lepi~ Sahafary_~ Lepile~ Lepilemur_septe~        0.7   NI       
## # ... with 738 more rows, and 8 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;</code></pre>
<p>if you put a minus sign in from of the variable it will organiz in descnein order</p>
<pre class="sourceCode r"><code class="sourceCode r">home_range <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="op">-</span>HomeRange_ha)</code></pre>
<pre><code>## # A tibble: 748 x 15
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Cerco~ Mand~ Mandrill   Mandri~ Mandrillus_sphi~        18147 NI       
##  2 Cerco~ Semn~ Malabar_S~ Semnop~ Semnopithecus_h~        12328 NI       
##  3 Cerco~ Semn~ Nepal_Sac~ Semnop~ Semnopithecus_s~         6987 NI       
##  4 Cerco~ Eryt~ Patas_Mon~ Erythr~ Erythrocebus_pa~         5200 NI       
##  5 Cerco~ Papio Olive_Bab~ Papio_~ Papio_anubis             4357 NI       
##  6 Cerco~ Mand~ Mandrill   Mandri~ Mandrillus_sphi~         4000 NI       
##  7 Homin~ Pan   Bonobo     Pan_pa~ Pan_paniscus             4000 2200     
##  8 Cerco~ Rhin~ Guizhou_S~ Rhinop~ Rhinopithecus_b~         3450 NI       
##  9 Cerco~ Papio Guinea_Ba~ Papio_~ Papio_papio              3250 2000     
## 10 Homin~ Gori~ Eastern_G~ Gorill~ Gorilla_beringei         3060 2110     
## # ... with 738 more rows, and 8 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="co">#or</span>
home_range <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(HomeRange_ha))</code></pre>
<pre><code>## # A tibble: 748 x 15
##    Family Genus CommonName Species `Species (ITIS)` HomeRange_ha Low_range
##    &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;    
##  1 Cerco~ Mand~ Mandrill   Mandri~ Mandrillus_sphi~        18147 NI       
##  2 Cerco~ Semn~ Malabar_S~ Semnop~ Semnopithecus_h~        12328 NI       
##  3 Cerco~ Semn~ Nepal_Sac~ Semnop~ Semnopithecus_s~         6987 NI       
##  4 Cerco~ Eryt~ Patas_Mon~ Erythr~ Erythrocebus_pa~         5200 NI       
##  5 Cerco~ Papio Olive_Bab~ Papio_~ Papio_anubis             4357 NI       
##  6 Cerco~ Mand~ Mandrill   Mandri~ Mandrillus_sphi~         4000 NI       
##  7 Homin~ Pan   Bonobo     Pan_pa~ Pan_paniscus             4000 2200     
##  8 Cerco~ Rhin~ Guizhou_S~ Rhinop~ Rhinopithecus_b~         3450 NI       
##  9 Cerco~ Papio Guinea_Ba~ Papio_~ Papio_papio              3250 2000     
## 10 Homin~ Gori~ Eastern_G~ Gorill~ Gorilla_beringei         3060 2110     
## # ... with 738 more rows, and 8 more variables: High_range &lt;chr&gt;,
## #   N_groups &lt;chr&gt;, Mean_individuals &lt;chr&gt;, Method &lt;chr&gt;,
## #   Alternative_HomeRange_ha &lt;chr&gt;, Alternative_HomeRange_method &lt;chr&gt;,
## #   Study_duration_months &lt;chr&gt;, Refs &lt;dbl&gt;</code></pre>
</div>
<div id="mutate" class="section level4">
<h4><span class="header-section-number">6.5.2.5</span> mutate</h4>
<p>This is a powerhouse and one that you will probably use a lot. it is simialr to some of the stuff you might do in Excel</p>
</div>
</div>
</div>
<div id="another-example" class="section level2">
<h2><span class="header-section-number">6.6</span> another example</h2>
<pre class="sourceCode r"><code class="sourceCode r">squirrel_raw &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;datasets/2018_Central_Park_Squirrel_Census_-_Squirrel_Data (1).csv&quot;</span>)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_character(),
##   X = col_double(),
##   Y = col_double(),
##   Date = col_double(),
##   `Hectare Squirrel Number` = col_double(),
##   Running = col_logical(),
##   Chasing = col_logical(),
##   Climbing = col_logical(),
##   Eating = col_logical(),
##   Foraging = col_logical(),
##   Kuks = col_logical(),
##   Quaas = col_logical(),
##   Moans = col_logical(),
##   `Tail flags` = col_logical(),
##   `Tail twitches` = col_logical(),
##   Approaches = col_logical(),
##   Indifferent = col_logical(),
##   `Runs from` = col_logical(),
##   `Zip Codes` = col_double(),
##   `Community Districts` = col_double(),
##   `Borough Boundaries` = col_double()
##   # ... with 2 more columns
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">squirrel &lt;-<span class="st"> </span>squirrel_raw <span class="op">%&gt;%</span><span class="st"> </span>janitor<span class="op">::</span><span class="kw">clean_names</span>()
squirrel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(date, <span class="dt">sort=</span>T)</code></pre>
<pre><code>## # A tibble: 11 x 2
##        date     n
##       &lt;dbl&gt; &lt;int&gt;
##  1 10132018   434
##  2 10072018   405
##  3 10142018   368
##  4 10062018   337
##  5 10102018   335
##  6 10082018   285
##  7 10122018   218
##  8 10172018   216
##  9 10182018   200
## 10 10192018   158
## 11 10202018    67</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:data.table&#39;:
## 
##     hour, isoweek, mday, minute, month, quarter, second, wday,
##     week, yday, year</code></pre>
<pre><code>## The following object is masked from &#39;package:base&#39;:
## 
##     date</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">squirrel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">parsed_date =</span> <span class="kw">mdy</span>(date))</code></pre>
<pre><code>## # A tibble: 3,023 x 36
##        x     y unique_squirrel~ hectare shift   date hectare_squirre~ age  
##    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt;
##  1 -74.0  40.8 13A-PM-1014-04   13A     PM    1.01e7                4 &lt;NA&gt; 
##  2 -74.0  40.8 15F-PM-1010-06   15F     PM    1.01e7                6 Adult
##  3 -74.0  40.8 19C-PM-1018-02   19C     PM    1.02e7                2 Adult
##  4 -74.0  40.8 21B-AM-1019-04   21B     AM    1.02e7                4 &lt;NA&gt; 
##  5 -74.0  40.8 23A-AM-1018-02   23A     AM    1.02e7                2 Juve~
##  6 -74.0  40.8 38H-PM-1012-01   38H     PM    1.01e7                1 Adult
##  7 -74.0  40.8 3D-AM-1006-06    03D     AM    1.01e7                6 &lt;NA&gt; 
##  8 -74.0  40.8 42C-AM-1007-02   42C     AM    1.01e7                2 &lt;NA&gt; 
##  9 -74.0  40.8 9A-PM-1010-02    09A     PM    1.01e7                2 Adult
## 10 -74.0  40.8 9B-AM-1010-04    09B     AM    1.01e7                4 &lt;NA&gt; 
## # ... with 3,013 more rows, and 28 more variables:
## #   primary_fur_color &lt;chr&gt;, highlight_fur_color &lt;chr&gt;,
## #   combination_of_primary_and_highlight_color &lt;chr&gt;, color_notes &lt;chr&gt;,
## #   location &lt;chr&gt;, above_ground_sighter_measurement &lt;chr&gt;,
## #   specific_location &lt;chr&gt;, running &lt;lgl&gt;, chasing &lt;lgl&gt;, climbing &lt;lgl&gt;,
## #   eating &lt;lgl&gt;, foraging &lt;lgl&gt;, other_activities &lt;chr&gt;, kuks &lt;lgl&gt;,
## #   quaas &lt;lgl&gt;, moans &lt;lgl&gt;, tail_flags &lt;lgl&gt;, tail_twitches &lt;lgl&gt;,
## #   approaches &lt;lgl&gt;, indifferent &lt;lgl&gt;, runs_from &lt;lgl&gt;,
## #   other_interactions &lt;chr&gt;, zip_codes &lt;dbl&gt;, community_districts &lt;dbl&gt;,
## #   borough_boundaries &lt;dbl&gt;, city_council_districts &lt;dbl&gt;,
## #   police_precincts &lt;dbl&gt;, parsed_date &lt;date&gt;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">squirrel &lt;-<span class="st"> </span>squirrel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">date =</span> <span class="kw">mdy</span>(date))
squirrel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(other_interactions) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(other_interactions)) <span class="op">%&gt;%</span><span class="st">  </span><span class="kw">View</span>()

squirrel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(other_interactions, <span class="dt">sort=</span>T)</code></pre>
<pre><code>## # A tibble: 198 x 2
##    other_interactions                    n
##    &lt;chr&gt;                             &lt;int&gt;
##  1 &lt;NA&gt;                               2783
##  2 runs from (dog)                       9
##  3 curious                               6
##  4 runs from (me)                        5
##  5 me                                    4
##  6 stared                                4
##  7 avoided people                        3
##  8 ran up tree when approached           3
##  9 could not get close due to fences     2
## 10 dog                                   2
## # ... with 188 more rows</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">squirrel <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">count</span>(other_activities, <span class="dt">sort=</span>T)</code></pre>
<pre><code>## # A tibble: 308 x 2
##    other_activities     n
##    &lt;chr&gt;            &lt;int&gt;
##  1 &lt;NA&gt;              2586
##  2 digging             19
##  3 sitting             16
##  4 walking             14
##  5 burying             12
##  6 playing             11
##  7 jumping              6
##  8 grooming             5
##  9 cleaning             4
## 10 hopping              4
## # ... with 298 more rows</code></pre>

</div>
</div>







            </section>

          </div>
        </div>
      </div>
<a href="working-with-spreadsheets.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["bookdown-start.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
